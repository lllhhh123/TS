{"code":"\"use strict\";\r\nvar Dispatch = /** @class */ (function () {\r\n    function Dispatch() {\r\n        this.list = {};\r\n    }\r\n    Dispatch.prototype.on = function (name, callback) {\r\n        var callbackList = this.list[name] || [];\r\n        callbackList.push(callback);\r\n        this.list[name] = callbackList;\r\n    };\r\n    Dispatch.prototype.emit = function (name) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var evnetName = this.list[name];\r\n        if (evnetName) {\r\n            evnetName.forEach(function (fn) {\r\n                fn.apply(_this, args);\r\n            });\r\n        }\r\n        else {\r\n            console.error('该事件未监听');\r\n        }\r\n    };\r\n    Dispatch.prototype.off = function (name, fn) {\r\n        var evnetName = this.list[name];\r\n        if (evnetName && fn) {\r\n            var index = evnetName.findIndex(function (fns) { return fns === fn; });\r\n            evnetName.splice(index, 1);\r\n        }\r\n        else {\r\n            console.error('该事件未监听');\r\n        }\r\n    };\r\n    Dispatch.prototype.once = function (name, fn) {\r\n        var _this = this;\r\n        var decor = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            fn.apply(_this, args);\r\n            _this.off(name, decor);\r\n        };\r\n        this.on(name, decor);\r\n    };\r\n    return Dispatch;\r\n}());\r\nvar o = new Dispatch();\r\no.on('abc', function () {\r\n    var arg = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        arg[_i] = arguments[_i];\r\n    }\r\n    console.log(arg, 1);\r\n});\r\no.once('abc', function () {\r\n    var arg = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        arg[_i] = arguments[_i];\r\n    }\r\n    console.log(arg, 'once');\r\n});\r\n// let fn = (...arg: Array<any>) => {\r\n//     console.log(arg, 2);\r\n// }\r\n// o.on('abc', fn)\r\n// o.on('ddd', (aaaa: string) => {\r\n//     console.log(aaaa);\r\n// })\r\n//o.off('abc', fn)\r\no.emit('abc', 1, true, '小满');\r\no.emit('abc', 2, true, '小满');\r\n// o.emit('ddd', 'addddddddd')\r\n//# sourceMappingURL=index.js.map","references":[],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/index.ts\"],\"names\":[],\"mappings\":\";AAUA;IAEI;QACI,IAAI,CAAC,IAAI,GAAG,EAAE,CAAA;IAClB,CAAC;IACD,qBAAE,GAAF,UAAG,IAAY,EAAE,QAAkB;QAC/B,IAAM,YAAY,GAAoB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;QAC5D,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QAC3B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,YAAY,CAAA;IAClC,CAAC;IACD,uBAAI,GAAJ,UAAK,IAAY;QAAjB,iBASC;QATkB,cAAmB;aAAnB,UAAmB,EAAnB,qBAAmB,EAAnB,IAAmB;YAAnB,6BAAmB;;QAClC,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QAC/B,IAAI,SAAS,EAAE;YACX,SAAS,CAAC,OAAO,CAAC,UAAA,EAAE;gBAChB,EAAE,CAAC,KAAK,CAAC,KAAI,EAAE,IAAI,CAAC,CAAA;YACxB,CAAC,CAAC,CAAA;SACL;aAAM;YACH,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;SAC3B;IACL,CAAC;IACD,sBAAG,GAAH,UAAI,IAAY,EAAE,EAAY;QAC1B,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QAC/B,IAAI,SAAS,IAAI,EAAE,EAAE;YACjB,IAAI,KAAK,GAAG,SAAS,CAAC,SAAS,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,KAAK,EAAE,EAAV,CAAU,CAAC,CAAA;YAClD,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;SAC7B;aAAM;YACH,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;SAC3B;IACL,CAAC;IACD,uBAAI,GAAJ,UAAK,IAAY,EAAE,EAAY;QAA/B,iBAMC;QALG,IAAI,KAAK,GAAG;YAAC,cAAmB;iBAAnB,UAAmB,EAAnB,qBAAmB,EAAnB,IAAmB;gBAAnB,yBAAmB;;YAC5B,EAAE,CAAC,KAAK,CAAC,KAAI,EAAE,IAAI,CAAC,CAAA;YACpB,KAAI,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;QACzB,CAAC,CAAA;QACD,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;IACxB,CAAC;IACL,eAAC;AAAD,CAAC,AApCD,IAoCC;AACD,IAAM,CAAC,GAAG,IAAI,QAAQ,EAAE,CAAA;AAGxB,CAAC,CAAC,EAAE,CAAC,KAAK,EAAE;IAAC,aAAkB;SAAlB,UAAkB,EAAlB,qBAAkB,EAAlB,IAAkB;QAAlB,wBAAkB;;IAC3B,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AACxB,CAAC,CAAC,CAAA;AAEF,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE;IAAC,aAAkB;SAAlB,UAAkB,EAAlB,qBAAkB,EAAlB,IAAkB;QAAlB,wBAAkB;;IAC7B,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;AAC7B,CAAC,CAAC,CAAA;AACF,qCAAqC;AACrC,2BAA2B;AAC3B,IAAI;AACJ,kBAAkB;AAClB,kCAAkC;AAClC,yBAAyB;AACzB,KAAK;AACL,kBAAkB;AAElB,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAA;AAE5B,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAA;AAE5B,8BAA8B\"}"}
